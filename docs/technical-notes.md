# Technical notes

Muwaqqit uses VSOP87D, published by the Bureau des Longitudes in Paris, to calculate astronomcal coordinates. These are considered accurate to within 0.0003°. Muwaqqit rise, set and transit times have been checked against thousands of data points from random locations published by the [United States Naval Observatory (USNO)](https://aa.usno.navy.mil) and agree to within 0.5 seconds on average. USNO together with HMNAO publish the Astronomical Almanac which is considered the cannonical reference for astronomical data.

Moon visibility is at the observer and best time, calculated using [Odeh 2005](http://www.icoproject.org/pdf/2006_cri.pdf). Qiblah magnetic bearing is calculated using the [International Geomagnetic Reference Field model (IGRF-12)](https://earth-planets-space.springeropen.com/articles/10.1186/s40623-015-0228-9). Night sky brightness uses [Falchi et al 2016](http://advances.sciencemag.org/content/2/6/e1600377.full). Elevation and Time Zone data is from [GeoNames](https://www.geonames.org) and [Google Maps API](https://developers.google.com/maps/documentation/). Day/night overlay uses [Georgiev's Nite](https://github.com/rossengeorgiev/nite-overlay). 

Fajr/ʿIshāʾ/Karāhah input altitudes are apparent solar altitudes. Temperature/pressure inputs are at the observer. The refraction coefficient is the ratio of light ray curvature to Earth curvature. Night fractions use the current day's Maghrib and the next day's Fajr. Night seasonal hour length uses the current day's Maghrib and the next day's Sunrise.

<note :label="false">[Muwaqqit GitHub repository](https://github.com/reedwan/muwaqqit/)</note>